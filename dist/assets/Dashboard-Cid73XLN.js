import{u as w,r as x,c as R,a as C,w as S,o as f,b as n,d as _,e,f as c,g as h,h as v,t as u,i as o,j as D,s as V,k as y,l as T,M as q}from"./index-DtKSGrAm.js";import{D as A}from"./SummaryCard-D7NXNoO5.js";import{s as P}from"./index-DHwsWBe6.js";import"./index-CbVaeDMJ.js";function k(){const p=w(),r=x(null),s=x({pendingApprovals:1,pendingValue:0,status:"Action Required",urgentRequests:1,urgentValue:0}),d=()=>{try{const a=localStorage.getItem("user");if(a){const g=JSON.parse(a);r.value=g.role}console.log("User role loaded:",r.value)}catch(a){console.error("Error loading user role:",a)}},t=R(()=>{var a;return((a=r.value)==null?void 0:a.toLowerCase())==="purchasing"});return{userRole:r,approvalData:s,loadUserRole:d,isPurchasingRole:t,navigateToRequestOrders:()=>{p.push("/request-orders")}}}const O={class:"card shadow"},$={__name:"RevenueStreamWidget",setup(p){const{getPrimary:r,getSurface:s,isDarkTheme:d}=C(),t=x(null),l=x(null);function a(){const i=getComputedStyle(document.documentElement);return{labels:["Q1","Q2","Q3","Q4"],datasets:[{type:"bar",label:"Subscriptions",backgroundColor:i.getPropertyValue("--p-primary-400"),data:[4e3,1e4,15e3,4e3],barThickness:32},{type:"bar",label:"Advertising",backgroundColor:i.getPropertyValue("--p-primary-300"),data:[2100,8400,2400,7500],barThickness:32},{type:"bar",label:"Affiliate",backgroundColor:i.getPropertyValue("--p-primary-200"),data:[4100,5200,3400,7400],borderRadius:{topLeft:8,topRight:8},borderSkipped:!0,barThickness:32}]}}function g(){const i=getComputedStyle(document.documentElement),b=i.getPropertyValue("--surface-border"),m=i.getPropertyValue("--text-color-secondary");return{maintainAspectRatio:!1,aspectRatio:.8,scales:{x:{stacked:!0,ticks:{color:m},grid:{color:"transparent",borderColor:"transparent"}},y:{stacked:!0,ticks:{color:m},grid:{color:b,borderColor:"transparent",drawTicks:!1}}}}}return S([r,s,d],()=>{t.value=a(),l.value=g()}),f(()=>{t.value=a(),l.value=g()}),(i,b)=>{const m=P;return n(),_("div",O,[b[0]||(b[0]=e("div",{class:"font-semibold text-xl mb-4"},"Overall Chart",-1)),c(m,{type:"bar",data:t.value,options:l.value,class:"h-80"},null,8,["data","options"])])}}},B={class:"grid grid-cols-12 gap-8"},N={class:"col-span-12 xl:col-span-12"},j=h({__name:"GeneralDashboard",setup(p){const r=[{title:"Total Budget",value:"$1,800,000",description:"24 new since last visit",icon:"pi pi-dollar",color:"orange"},{title:"Total Spent",value:"52%",description:"+52% since last week",icon:"pi pi-chart-line",color:"blue"},{title:"Budget Items",value:"14",description:"5 Delivered",icon:"pi pi-database",color:"green"},{title:"Project Days",value:"669",description:"Since project start",icon:"pi pi-calendar",color:"purple"}];return(s,d)=>(n(),_("div",B,[c(A,{cardItems:r,cardCol:4}),e("div",N,[c($)])]))}}),L={class:"p-6 card glossy-card mb-0"},M={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},Q={class:"shadow-sm border border-amber-200 rounded-lg p-6"},E={class:"flex items-center justify-between"},U={class:"dark:text-amber-100 text-3xl font-bold text-amber-900 mb-2"},I={class:"shadow-sm border border-blue-200 rounded-lg p-6"},G={class:"flex items-center justify-between"},J={class:"dark:text-blue-100 text-3xl font-bold text-blue-900 mb-2"},W={class:"shadow-sm border border-gray-200 rounded-lg p-6"},z={class:"flex items-center justify-between"},F={class:"dark:text-gray-100 text-3xl font-bold text-gray-900 mb-2"},H={class:"dark:bg-gray-800 bg-amber-50 border border-amber-200 rounded-lg p-6 shadow-sm"},K={class:"flex items-center justify-between"},X={class:"dark:text-amber-100 text-amber-800 font-semibold text-lg mb-2"},Y={class:"dark:text-amber-100 text-amber-700"},Z={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-8"},ee={class:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6"},te={class:"space-y-3"},re=h({__name:"PurchasingDashboard",setup(p){const{approvalData:r,navigateToRequestOrders:s}=k();return(d,t)=>{const l=V;return n(),_("div",L,[t[8]||(t[8]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"},"Approval Dashboard"),e("p",{class:"text-gray-600 dark:text-gray-300 mt-2"},"Manage pending request order approvals")],-1)),e("div",M,[e("div",Q,[e("div",E,[e("div",null,[t[0]||(t[0]=e("h3",{class:"dark:text-amber-100 text-amber-800 font-semibold mb-2 flex items-center gap-2"},[e("i",{class:"pi pi-exclamation-triangle text-amber-600"}),v(" Pending Approvals ")],-1)),e("div",U,u(o(r).pendingApprovals),1),t[1]||(t[1]=e("p",{class:"dark:text-amber-100 text-amber-700 text-sm"},"Request orders awaiting approval",-1))])])]),e("div",I,[e("div",G,[e("div",null,[t[2]||(t[2]=e("h3",{class:"dark:text-blue-100 text-blue-800 font-semibold mb-2 flex items-center gap-2"},[e("i",{class:"pi pi-dollar text-blue-600"}),v(" Pending Value ")],-1)),e("div",J,"$"+u(o(r).pendingValue.toLocaleString()),1),t[3]||(t[3]=e("p",{class:"dark:text-blue-100 text-blue-700 text-sm"},"Total value pending approval",-1))])])]),e("div",W,[e("div",z,[e("div",null,[t[4]||(t[4]=e("h3",{class:"dark:text-gray-100 text-gray-800 font-semibold mb-2 flex items-center gap-2"},[e("i",{class:"dark:text-gray-100 pi pi-refresh text-gray-600"}),v(" Status ")],-1)),e("div",F,u(o(r).status),1),t[5]||(t[5]=e("p",{class:"dark:text-gray-100 text-gray-700 text-sm"},"Current approval status",-1))])])])]),e("div",H,[e("div",K,[e("div",null,[e("h3",X,"Urgent: "+u(o(r).urgentRequests)+" Request Orders Need Approval",1),e("p",Y,"Total value: $"+u(o(r).urgentValue.toLocaleString()),1)]),c(l,{label:"Review Now",icon:"pi pi-exclamation-triangle",class:"bg-amber-600 hover:bg-amber-700 border-amber-600 hover:border-amber-700",onClick:o(s)},null,8,["onClick"])])]),e("div",Z,[t[7]||(t[7]=D('<div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6"><h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Recent Activity</h3><div class="space-y-3"><div class="flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded"><i class="pi pi-clock text-blue-600"></i><div><p class="text-sm font-medium text-gray-900 dark:text-white">New request order submitted</p><p class="text-xs text-gray-500 dark:text-gray-400">2 minutes ago</p></div></div><div class="flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded"><i class="pi pi-check-circle text-green-600"></i><div><p class="text-sm font-medium text-gray-900 dark:text-white">Order RO2025208756 approved</p><p class="text-xs text-gray-500 dark:text-gray-400">1 hour ago</p></div></div></div></div>',1)),e("div",ee,[t[6]||(t[6]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Quick Actions",-1)),e("div",te,[c(l,{label:"View All Request Orders",icon:"pi pi-list",outlined:"",class:"w-full",onClick:o(s)},null,8,["onClick"]),c(l,{label:"Generate Report",icon:"pi pi-file-pdf",outlined:"",class:"w-full",disabled:""})])])])])}}}),ie=h({__name:"Dashboard",setup(p){const{isPurchasingRole:r,loadUserRole:s}=k();return f(()=>{s()}),(d,t)=>(n(),y(o(q),{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8}},{default:T(()=>[o(r)?(n(),y(re,{key:0})):(n(),y(j,{key:1}))]),_:1}))}});export{ie as default};

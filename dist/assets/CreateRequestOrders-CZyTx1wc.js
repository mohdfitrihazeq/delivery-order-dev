import{s as pe}from"./index-Dv8gB4kq.js";import{s as se,a as ne}from"./index-CcNHh_jx.js";import{g as H,_ as G,b as k,d as _,e,A as ee,t as m,m as ie,s as K,r as g,w as N,c as V,k as ae,l as u,f as o,M as ve,u as ye,v as ge,B as fe,z as Y,F as te,x as le,p as oe,q as be}from"./index-DtKSGrAm.js";import{s as Q,a as W,b as he,c as de}from"./index-Bmzqu6cu.js";import{s as we}from"./index-Bqx_AaIz.js";import{s as X,a as Ce}from"./index-jQIVVtLz.js";import{s as ke}from"./index-By_bAaD8.js";import{s as Z}from"./index-CK2i3JJ2.js";import{_ as Te}from"./BreadcrumbList.vue_vue_type_script_setup_true_lang-Brefl-cP.js";import{s as re}from"./index-0WzKa8Xy.js";import"./index-DiGaO9lk.js";import"./index-DsNqXNZw.js";const xe=H({name:"BudgetInfoCard",props:{budgetType:{type:String,required:!0}},computed:{titleText(){return`Current Budget Type: ${this.budgetType}`},descText(){return this.budgetType==="Budgeted Item"?"Items will be selected from your project budget. Descriptions and prices are pre-filled.":"Items are not in the project budget. Descriptions and prices must be entered manually."},stripColor(){return this.budgetType==="Budgeted Item"?"bg-blue-500":"bg-yellow-500"},iconBgColor(){return this.budgetType==="Budgeted Item"?"bg-blue-50":"bg-yellow-50"},iconTextColor(){return this.budgetType==="Budgeted Item"?"text-blue-500":"text-yellow-600"}}}),Ie={class:"dark:bg-gray-800 flex items-start gap-3 border-gray-200 dark:border-gray-700 border rounded-xl p-4 shadow-sm transition relative"},_e={class:"relative z-10"},$e={class:"dark:text-white font-semibold text-gray-800"},Be={class:"dark:text-gray-200 text-sm"};function Se(t,l,B,L,S,T){return k(),_("div",Ie,[e("div",{class:ee(["absolute left-0 top-0 bottom-0 w-1 rounded-l-xl",t.stripColor])},null,2),e("div",{class:ee(["dark:bg-gray-700 flex-shrink-0 w-8 h-8 flex items-center justify-center rounded-md relative z-10",[t.iconBgColor,t.iconTextColor]])},l[0]||(l[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:`M9 17h6m-6-4h6m2 9H7a2 2 0 
                         01-2-2V5a2 2 0 012-2h5l2 2h5a2 
                         2 0 012 2v12a2 2 0 01-2 2z`})],-1)]),2),e("div",_e,[e("p",$e,m(t.titleText),1),e("p",Be,m(t.descText),1)])])}const Me=G(xe,[["render",Se]]),Ve=H({name:"CreateROModal",components:{Dialog:ie,DataTable:Q,Column:W,Button:K,InputText:Z,Dropdown:X,Checkbox:he,Tag:re},props:{visible:{type:Boolean,default:!1}},emits:["update:visible","items-selected"],setup(t,{emit:l}){const B=g(t.visible);N(()=>t.visible,a=>{B.value=a}),N(B,a=>{l("update:visible",a)});const L=g("Add Bulk Items from Budget"),S=g(!1),T=g(""),x=g(null),h=g(null),f=g(null),c=g([]),w=g(!1),v=g([{itemCode:"STL-001",description:"Steel reinforcement bars Grade 60",location:"Building A > Level 1-5",element:"Structure > Foundation > Reinforcement",itemType:"Materials",uom:"kg",quantity:2500,price:5.5},{itemCode:"CON-002",description:"Ready mix concrete C25/30",location:"Building A > Level 1-3",element:"Structure > Foundation > Concrete",itemType:"Materials",uom:"mÂ³",quantity:180,price:250},{itemCode:"LAB-001",description:"Excavation work including disposal",location:"Building A > Site Area",element:"Earthworks > Excavation > Manual",itemType:"Labour",uom:"mÂ³",quantity:450,price:40},{itemCode:"STL-002",description:"Structural steel beams H-section",location:"Building A > Level 6-10",element:"Structure > Columns > Steel Beams",itemType:"Materials",uom:"kg",quantity:1800,price:6},{itemCode:"EQP-001",description:"Tower crane rental monthly",location:"Building A > All Levels",element:"Equipment > Lifting > Tower Crane",itemType:"Equipment",uom:"month",quantity:12,price:15e3},{itemCode:"INS-001",description:"Electrical panel installation",location:"Building B > Level 1-8",element:"Infrastructure > Electrical > Panel",itemType:"Installation",uom:"unit",quantity:24,price:1200}]),b=V(()=>c.value.reduce((a,s)=>a+s.price*s.quantity,0)),i=V(()=>[...new Set(v.value.map(s=>s.location))].map(s=>({label:s,value:s}))),C=V(()=>[...new Set(v.value.map(s=>s.element))].map(s=>({label:s,value:s}))),U=V(()=>[...new Set(v.value.map(s=>s.itemType))].map(s=>({label:s,value:s}))),$=V(()=>{let a=[...v.value];if(T.value){const s=T.value.toLowerCase();a=a.filter(I=>I.itemCode.toLowerCase().includes(s)||I.description.toLowerCase().includes(s))}return x.value&&(a=a.filter(s=>s.location===x.value)),h.value&&(a=a.filter(s=>s.element===h.value)),f.value&&(a=a.filter(s=>s.itemType===f.value)),a}),D=V(()=>!!(T.value||x.value||h.value||f.value));N(c,a=>{w.value=a.length===$.value.length&&$.value.length>0},{deep:!0}),N($,a=>{a.length===0?w.value=!1:w.value=c.value.length===a.length});const R=()=>{l("update:visible",!1),A()},A=()=>{c.value=[],w.value=!1,q()},q=()=>{T.value="",x.value=null,h.value=null,f.value=null},O=()=>{w.value?c.value=[...$.value]:c.value=[]},z=()=>{c.value.length>0&&(l("items-selected",[...c.value]),R())},n=a=>({Materials:"info",Labour:"warning",Equipment:"success",Installation:"secondary"})[a]||"info";return(async()=>{S.value=!0;try{await new Promise(a=>setTimeout(a,500))}catch(a){console.error("Error loading budget items:",a)}finally{S.value=!1}})(),{modalTitle:L,loading:S,searchTerm:T,selectedLocation:x,selectedElement:h,selectedItemType:f,selectedItems:c,selectAll:w,budgetItems:v,localVisible:B,grandTotal:b,locationOptions:i,elementOptions:C,itemTypeOptions:U,filteredItems:$,hasActiveFilters:D,closeModal:R,clearFilters:q,toggleSelectAll:O,addSelectedItems:z,getItemTypeSeverity:n}}}),Le={class:"mb-4"},Ue={class:"flex gap-4 mb-4"},Re={class:"flex-1"},Ae={class:"p-input-icon-left w-full"},qe={class:"grid grid-cols-3 gap-4"},De={class:"mb-4 text-sm text-gray-600"},Oe={class:"border border-gray-200 rounded-lg overflow-hidden mb-4"},ze={class:"font-medium"},Fe={class:"text-sm"},Ee={class:"text-sm"},Ne={class:"text-sm"},je={class:"font-medium"},Pe={class:"font-bold"},Ye={class:"pt-3 mt-2 border-t text-right text-lg font-semibold"},He={class:"flex items-center justify-between"},Ge={class:"text-sm text-gray-600"},Ke={class:"flex gap-3"};function Qe(t,l,B,L,S,T){const x=Z,h=K,f=X,c=W,w=re,v=Q,b=ie;return k(),ae(b,{visible:t.localVisible,"onUpdate:visible":l[5]||(l[5]=i=>t.localVisible=i),modal:"",header:t.modalTitle,style:{width:"90vw",maxWidth:"1200px"},closable:!0,onHide:t.closeModal,class:"create-ro-modal"},{header:u(()=>l[6]||(l[6]=[e("div",{class:"flex items-center gap-3"},[e("i",{class:"pi pi-box text-xl"}),e("div",null,[e("h2",{class:"text-xl font-bold m-0"},"Add Bulk Items from Budget"),e("p",{class:"text-sm text-gray-500 m-0"},"Select multiple items from your project budget to add to your request order.")])],-1)])),footer:u(()=>[e("div",He,[e("div",Ge,m(t.selectedItems.length)+" items selected",1),e("div",Ke,[o(h,{label:"Cancel",icon:"pi pi-times",outlined:"",onClick:t.closeModal},null,8,["onClick"]),o(h,{label:`Add Selected Items (${t.selectedItems.length})`,icon:"pi pi-check",onClick:t.addSelectedItems,disabled:t.selectedItems.length===0},null,8,["label","onClick","disabled"])])])]),default:u(()=>[e("div",Le,[e("div",Ue,[e("div",Re,[e("div",Ae,[o(x,{modelValue:t.searchTerm,"onUpdate:modelValue":l[0]||(l[0]=i=>t.searchTerm=i),placeholder:"Search by item code or description...",class:"w-full"},null,8,["modelValue"])])]),o(h,{label:"Clear Filters",icon:"pi pi-times",outlined:"",onClick:t.clearFilters,disabled:!t.hasActiveFilters},null,8,["onClick","disabled"])]),e("div",qe,[e("div",null,[l[7]||(l[7]=e("label",{class:"block text-sm font-medium mb-2"},"Location",-1)),o(f,{modelValue:t.selectedLocation,"onUpdate:modelValue":l[1]||(l[1]=i=>t.selectedLocation=i),options:t.locationOptions,"option-label":"label","option-value":"value",placeholder:"All",class:"w-full","show-clear":!0},null,8,["modelValue","options"])]),e("div",null,[l[8]||(l[8]=e("label",{class:"block text-sm font-medium mb-2"},"Element",-1)),o(f,{modelValue:t.selectedElement,"onUpdate:modelValue":l[2]||(l[2]=i=>t.selectedElement=i),options:t.elementOptions,"option-label":"label","option-value":"value",placeholder:"All",class:"w-full","show-clear":!0},null,8,["modelValue","options"])]),e("div",null,[l[9]||(l[9]=e("label",{class:"block text-sm font-medium mb-2"},"Item Type",-1)),o(f,{modelValue:t.selectedItemType,"onUpdate:modelValue":l[3]||(l[3]=i=>t.selectedItemType=i),options:t.itemTypeOptions,"option-label":"label","option-value":"value",placeholder:"All",class:"w-full","show-clear":!0},null,8,["modelValue","options"])])])]),e("div",De,"Showing "+m(t.filteredItems.length)+" of "+m(t.budgetItems.length)+" items",1),e("div",Oe,[o(v,{value:t.filteredItems,selection:t.selectedItems,"onUpdate:selection":l[4]||(l[4]=i=>t.selectedItems=i),"data-key":"itemCode",scrollable:!0,"scroll-height":"400px",class:"w-full",loading:t.loading},{default:u(()=>[o(c,{"selection-mode":"multiple",style:{width:"3rem"}}),o(c,{field:"itemCode",header:"Item Code",style:{"min-width":"120px"}},{body:u(i=>[e("span",ze,m(i.data.itemCode),1)]),_:1}),o(c,{field:"description",header:"Description",style:{"min-width":"250px"}},{body:u(i=>[e("span",null,m(i.data.description),1)]),_:1}),o(c,{field:"location",header:"Location",style:{"min-width":"150px"}},{body:u(i=>[e("span",Fe,m(i.data.location),1)]),_:1}),o(c,{field:"element",header:"Element",style:{"min-width":"200px"}},{body:u(i=>[e("span",Ee,m(i.data.element),1)]),_:1}),o(c,{field:"itemType",header:"Item Type",style:{"min-width":"100px"}},{body:u(i=>[o(w,{value:i.data.itemType,severity:t.getItemTypeSeverity(i.data.itemType)},null,8,["value","severity"])]),_:1}),o(c,{field:"uom",header:"UOM",style:{"min-width":"80px"}},{body:u(i=>[e("span",Ne,m(i.data.uom),1)]),_:1}),o(c,{field:"price",header:"Price",style:{"min-width":"120px"},class:"text-right"},{body:u(i=>[e("span",je,m(i.data.price.toLocaleString(void 0,{style:"currency",currency:"MYR"})),1)]),_:1}),o(c,{header:"Total",style:{"min-width":"150px"},class:"text-right"},{body:u(i=>[e("span",Pe,m((i.data.price*i.data.quantity).toLocaleString(void 0,{style:"currency",currency:"MYR"})),1)]),_:1})]),_:1},8,["value","selection","loading"])]),e("div",Ye,"Total: "+m(t.grandTotal.toLocaleString(void 0,{style:"currency",currency:"MYR"})),1)]),_:1},8,["visible","header","onHide"])}const We=G(Ve,[["render",Qe],["__scopeId","data-v-abcea290"]]),Xe=H({name:"CreateRequestOrders",components:{Motion:ve,BudgetInfoCard:Me,Menu:de,CreateROModal:We,FileUpload:se,ProgressBar:ne},setup(){const t=ye(),l=ge(),B=fe(),L=g(null),S=g("RO2025208757"),T=g("Budgeted Item"),x=g(""),h=g([{label:"Budgeted Item",value:"Budgeted Item"},{label:"Unbudgeted Item",value:"Unbudgeted Item"}]),f=g([]),c=g([{label:"STL-01",value:"STL-01",description:"Steel reinforcement bar 60mm",location:"Building A > Level 1-5",uom:"Ton"},{label:"CEM-02",value:"CEM-02",description:"Cement Portland Type I",location:"Building B > Level 1-8",uom:"Bag"}]),w=g(!1),v=g([]),b=g(0),i=g(0),C=g([]),U=(d,p,r)=>{p(r),b.value-=d.size,i.value=Math.min(b.value/1e6*100,100)},$=d=>{d(),b.value=0,i.value=0},D=d=>{i.value=Math.min(b.value/1e6*100,100),d()},R=()=>{l.add({severity:"info",summary:"Success",detail:"File Uploaded",life:3e3})},A=d=>{const M=B.config.locale.fileSizeTypes;if(d===0)return`0 ${M[0]}`;const E=Math.floor(Math.log(d)/Math.log(1024));return`${parseFloat((d/Math.pow(1024,E)).toFixed(3))} ${M[E]}`},q=()=>{f.value.push({itemCode:"",description:"",location:"",uom:"",quantity:"1",price:0,deliveryDate:null,notes:"",remark:"",showNotes:!1,showRemark:!1})},O=d=>{const p=c.value.find(r=>r.value===d.itemCode);p&&(d.description=p.description,d.uom=p.uom,d.location=p.location)},z=d=>{const p=c.value.find(r=>r.value===d);return p?p.label:d},n=(d,p)=>{const r=v.value[p];r&&r.toggle(d)},y=(d,p)=>[{label:"Delete Item",icon:"pi pi-trash",command:()=>{f.value.splice(p,1),v.value.splice(p,1)}},{label:d.showNotes?"Hide Note":"Add Note",icon:"pi pi-file",command:()=>{d.showNotes=!d.showNotes}}],a=(d,p)=>{d&&(v.value[p]=d)},s=()=>{T.value==="Budgeted Item"&&(w.value=!0)},I=d=>{const p=d.map(r=>({itemCode:r.itemCode,description:r.description,location:r.location,uom:r.uom,quantity:r.quantity.toString(),deliveryDate:null,notes:"",remark:"",price:r.price,showNotes:!1,showRemark:!1}));f.value.push(...p),d.forEach(r=>{c.value.find(E=>E.value===r.itemCode)||c.value.push({label:r.itemCode,value:r.itemCode,description:r.description,location:r.location,uom:r.uom})}),l.add({severity:"success",summary:"Items Added Successfully",detail:`${d.length} ${d.length===1?"item has":"items have"} been added from budget`,life:3e3})},j=g(""),F=1e6,J=g([]),P=g(!0),ue=d=>{J.value=d.files;let p=0,r=!0;J.value.forEach(M=>{p+=M.size,M.size>F&&(r=!1)}),b.value=p,i.value=b.value/F*100,!r||b.value>F?(l.add({severity:"error",summary:"File too large",detail:`Each file must not exceed ${me(F)}.`,life:5e3}),P.value=!1):P.value=!0},me=d=>{const p=["B","KB","MB","GB"],r=Math.floor(Math.log(d)/Math.log(1024));return parseFloat((d/Math.pow(1024,r)).toFixed(2))+" "+p[r]},ce=V(()=>f.value.reduce((d,p)=>{const r=p.price??0,M=parseFloat(p.quantity)||0;return d+r*M},0));return{roNumber:S,budgetType:T,roDate:x,goBack:()=>t.push({name:"request-orders"}),budgetOptions:h,calendarValue:L,items:f,addItem:q,itemOptions:c,fillItemDetails:O,getItemLabel:z,toggleMenu:n,getActionItems:y,menuRefs:v,setMenuRef:a,grandTotal:ce,showBulkItemModal:w,openBulkItemModal:s,handleSelectedItems:I,files:C,totalSize:b,totalSizePercent:i,onSelectedFiles:ue,uploadEvent:D,onTemplatedUpload:R,formatSize:A,onRemoveTemplatingFile:U,onClearTemplatingUpload:$,isAttachmentValid:P,overallRemark:j}}}),Ze={class:"p-6 card glossy-card"},Je={class:"card p-4 mb-6 shadow"},et={class:"grid grid-cols-3 gap-4"},tt={class:"card p-4 mb-6 shadow"},lt={class:"flex justify-between items-center mb-4"},ot={class:"flex gap-2"},st={key:0,class:"flex justify-center items-center py-10 text-gray-500"},nt={class:"text-center"},it={class:"flex gap-2 justify-center mt-4"},at={key:1,class:"overflow-x-auto"},dt={class:"flex flex-col"},rt={class:"font-medium"},ut={class:"text-xs text-gray-500"},mt={key:0},ct={key:1,class:"text-gray-400"},pt={class:"px-2"},vt={class:"px-2"},yt={class:"text-center"},gt={class:"font-semibold pr-2"},ft={class:"pt-3 mt-2 border-t text-right text-lg font-semibold"},bt={class:"mt-4"},ht={class:"flex flex-wrap justify-content-between align-items-center flex-1 gap-2"},wt={class:"flex gap-2"},Ct={class:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-white-600"},kt={key:0},Tt={class:"flex flex-wrap p-0 sm:p-5 gap-5"},xt=["alt","src"],It={class:"font-semibold"},_t={key:1},$t={class:"flex flex-wrap p-0 sm:p-5 gap-5"},Bt=["alt","src"],St={class:"font-semibold"},Mt={class:"mt-4"},Vt={class:"pt-3 mt-2 border-t text-sm text-gray-600 flex justify-between"},Lt={class:"flex justify-end gap-3"};function Ut(t,l,B,L,S,T){const x=Te,h=Z,f=Ce,c=ke,w=Y("BudgetInfoCard"),v=K,b=Y("Motion"),i=X,C=W,U=we,$=de,D=Q,R=ne,A=be,q=se,O=pe,z=Y("CreateROModal");return k(),ae(b,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.6}},{default:u(()=>[e("div",Ze,[o(x),l[20]||(l[20]=e("div",{class:"flex items-center mb-6 gap-4"},[e("div",null,[e("h1",{class:"text-2xl font-bold"},"Create Request Order"),e("p",{class:"text-gray-500"},"Create a new request order for project: MKT")])],-1)),e("div",Je,[l[11]||(l[11]=e("h2",{class:"text-lg font-semibold mb-4"},"Request Order Details",-1)),e("div",et,[e("div",null,[l[8]||(l[8]=e("label",{class:"block text-sm text-gray-600 mb-1"},"RO Number",-1)),o(h,{modelValue:t.roNumber,"onUpdate:modelValue":l[0]||(l[0]=n=>t.roNumber=n),type:"text",class:"w-full"},null,8,["modelValue"])]),e("div",null,[l[9]||(l[9]=e("label",{for:"budgetType",class:"block font-medium mb-1"},"Budget Type",-1)),o(f,{id:"budgetType",modelValue:t.budgetType,"onUpdate:modelValue":l[1]||(l[1]=n=>t.budgetType=n),options:t.budgetOptions,optionLabel:"label",optionValue:"value",placeholder:"Select Budget Type",class:"w-full"},null,8,["modelValue","options"])]),e("div",null,[l[10]||(l[10]=e("label",{class:"block text-sm text-gray-600 mb-1"},"RO Date",-1)),o(c,{showIcon:!0,showButtonBar:!0,modelValue:t.calendarValue,"onUpdate:modelValue":l[2]||(l[2]=n=>t.calendarValue=n)},null,8,["modelValue"])])])]),o(w,{class:"my-4",budgetType:t.budgetType},null,8,["budgetType"]),e("div",tt,[e("div",lt,[l[12]||(l[12]=e("h2",{class:"text-lg font-semibold"},"Order Items",-1)),e("div",ot,[o(v,{label:"Add Bulk Items",icon:"pi pi-box",outlined:"",onClick:t.openBulkItemModal,disabled:t.budgetType!=="Budgeted Item"},null,8,["onClick","disabled"]),o(v,{label:"+ Add Item",onClick:t.addItem},null,8,["onClick"])])]),t.items.length===0?(k(),_("div",st,[o(b,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8}},{default:u(()=>[e("div",nt,[l[13]||(l[13]=e("div",{class:"text-5xl mb-2"},"ðŸ“¦",-1)),l[14]||(l[14]=e("p",null,"No items added yet",-1)),e("div",it,[o(v,{label:"Add from Budget",icon:"pi pi-box",outlined:"",onClick:t.openBulkItemModal,disabled:t.budgetType!=="Budgeted Item"},null,8,["onClick","disabled"]),o(v,{label:"+ Add First Item",onClick:t.addItem},null,8,["onClick"])])])]),_:1})])):(k(),_("div",at,[o(b,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8}},{default:u(()=>[o(D,{value:t.items,class:"rounded-lg",scrollable:"",scrollHeight:"400px"},{default:u(()=>[o(C,{field:"itemCode",header:"Item Code",style:{"min-width":"120px",width:"20%"}},{body:u(({data:n})=>[o(i,{modelValue:n.itemCode,"onUpdate:modelValue":y=>n.itemCode=y,options:t.itemOptions,optionLabel:"label",optionValue:"value",placeholder:"Select item...",class:"w-full",onChange:y=>t.fillItemDetails(n)},{option:u(y=>[e("div",dt,[e("span",rt,m(y.option.label),1),e("span",ut,m(y.option.description),1)])]),value:u(y=>[y.value?(k(),_("span",mt,m(t.getItemLabel(y.value)),1)):(k(),_("span",ct,"Select item..."))]),_:2},1032,["modelValue","onUpdate:modelValue","options","onChange"])]),_:1}),o(C,{field:"description",header:"Description",style:{"min-width":"200px",width:"25%"}},{body:u(({data:n})=>[e("div",pt,m(n.description),1)]),_:1}),o(C,{field:"location",header:"Location",style:{"min-width":"150px",width:"18%"}},{body:u(({data:n})=>[e("div",vt,m(n.location),1)]),_:1}),o(C,{field:"uom",header:"UOM",style:{"min-width":"70px",width:"70px"}},{body:u(({data:n})=>[e("div",yt,m(n.uom),1)]),_:1}),o(C,{field:"quantity",header:"Quantity",style:{"min-width":"140px",width:"10% !important"}},{body:u(({data:n})=>[o(U,{modelValue:n.quantity,"onUpdate:modelValue":y=>n.quantity=y,modelModifiers:{number:!0},class:"w-full",min:0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(C,{field:"price",header:"Price",style:{"min-width":"140px",width:"10% !important"}},{body:u(({data:n})=>[o(U,{modelValue:n.price,"onUpdate:modelValue":y=>n.price=y,mode:"currency",currency:"MYR",locale:"en-MY",class:"w-full",minFractionDigits:2},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(C,{header:"Total",style:{"min-width":"130px",width:"130px","text-align":"right"}},{body:u(({data:n})=>[e("span",gt,m(((n.price??0)*(n.quantity??0)).toLocaleString("en-MY",{style:"currency",currency:"MYR"})),1)]),_:1}),o(C,{field:"deliveryDate",header:"Delivery Date",style:{"min-width":"150px",width:"150px"}},{body:u(({data:n})=>[o(c,{modelValue:n.deliveryDate,"onUpdate:modelValue":y=>n.deliveryDate=y,placeholder:"mm/dd/yyyy",dateFormat:"mm/dd/yy",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(C,{header:"Action",style:{"min-width":"60px",width:"60px","text-align":"center"}},{body:u(({data:n,index:y})=>[o(v,{icon:"pi pi-ellipsis-v",text:"",onClick:a=>t.toggleMenu(a,y)},null,8,["onClick"]),o($,{model:t.getActionItems(n,y),popup:!0,ref:a=>t.setMenuRef(a,y)},null,8,["model"])]),_:1})]),_:1},8,["value"]),e("div",ft,"Total: "+m(t.grandTotal.toLocaleString("en-MY",{style:"currency",currency:"MYR"})),1),e("div",bt,[l[18]||(l[18]=e("label",{class:"block text-sm text-gray-600 mb-5"},"Attachments",-1)),o(q,{modelValue:t.attachments,"onUpdate:modelValue":l[3]||(l[3]=n=>t.attachments=n),name:"demo[]",url:"/api/upload",onUpload:l[4]||(l[4]=n=>t.onTemplatedUpload(n)),multiple:!0,accept:"image/*",maxFileSize:1e6,onSelect:t.onSelectedFiles},{header:u(({chooseCallback:n,uploadCallback:y,clearCallback:a,files:s})=>[e("div",ht,[e("div",wt,[o(v,{onClick:I=>n(),icon:"pi pi-images",rounded:"",outlined:""},null,8,["onClick"]),o(v,{onClick:I=>t.uploadEvent(y),icon:"pi pi-cloud-upload",rounded:"",outlined:"",severity:"success",disabled:!s||s.length===0},null,8,["onClick","disabled"]),o(v,{onClick:I=>t.onClearTemplatingUpload(a),icon:"pi pi-times",rounded:"",outlined:"",severity:"danger",disabled:!s||s.length===0},null,8,["onClick","disabled"])]),o(R,{value:t.totalSizePercent,showValue:!0,class:"md:w-20rem h-1rem w-full md:ml-auto relative"},{default:u(()=>[e("span",Ct,m(t.totalSize)+"B / 1MB ",1)]),_:1},8,["value"])])]),content:u(({files:n,uploadedFiles:y,removeUploadedFileCallback:a})=>[n.length>0?(k(),_("div",kt,[l[15]||(l[15]=e("h5",null,"Pending",-1)),e("div",Tt,[(k(!0),_(te,null,le(n,(s,I)=>(k(),_("div",{key:s.name+s.type+s.size,class:"card m-0 px-6 flex flex-column border-1 surface-border align-items-center gap-3"},[e("div",null,[e("img",{role:"presentation",alt:s.name,src:s.objectURL,width:"100",height:"50"},null,8,xt)]),e("span",It,m(s.name),1),e("div",null,m(t.formatSize(s.size)),1),o(A,{value:"Pending",severity:"warning"}),o(v,{icon:"pi pi-times",onClick:j=>t.onRemoveTemplatingFile(s,t.removeFileCallback,I),outlined:"",rounded:"",severity:"danger"},null,8,["onClick"])]))),128))])])):oe("",!0),y.length>0?(k(),_("div",_t,[l[16]||(l[16]=e("h5",null,"Completed",-1)),e("div",$t,[(k(!0),_(te,null,le(y,(s,I)=>(k(),_("div",{key:s.name+s.type+s.size,class:"card m-0 px-6 flex flex-column border-1 surface-border align-items-center gap-3"},[e("div",null,[e("img",{role:"presentation",alt:s.name,src:s.objectURL,width:"100",height:"50"},null,8,Bt)]),e("span",St,m(s.name),1),e("div",null,m(t.formatSize(s.size)),1),o(A,{value:"Completed",class:"mt-3",severity:"success"}),o(v,{icon:"pi pi-times",onClick:j=>a(I),outlined:"",rounded:"",severity:"danger"},null,8,["onClick"])]))),128))])])):oe("",!0)]),empty:u(()=>l[17]||(l[17]=[e("div",{class:"flex items-center justify-center flex-col"},[e("i",{class:"pi pi-cloud-upload !border-2 !rounded-full !p-8 !text-4xl !text-muted-color"}),e("p",{class:"mt-6 mb-0"},"Drag and drop files to here to upload.")],-1)])),_:1},8,["modelValue","onSelect"])]),e("div",Mt,[l[19]||(l[19]=e("label",{class:"block text-sm text-gray-600 mb-1"},"Remark",-1)),o(O,{modelValue:t.overallRemark,"onUpdate:modelValue":l[5]||(l[5]=n=>t.overallRemark=n),rows:"3",class:"w-full",placeholder:""},null,8,["modelValue"])]),e("div",Vt,[e("span",null,m(t.items.length)+" "+m(t.items.length>1?"items":"item"),1),e("span",null,m(t.budgetType==="Budgeted Item"?"Budgeted":"Unbudgeted"),1)])]),_:1})]))]),e("div",Lt,[o(v,{label:"Cancel",onClick:l[6]||(l[6]=n=>t.$router.push("/request-orders")),outlined:""}),o(v,{label:"Save as Draft",severity:"secondary",outlined:""}),o(v,{label:"Submit Request Order",disabled:!t.isAttachmentValid},null,8,["disabled"])])]),o(z,{visible:t.showBulkItemModal,"onUpdate:visible":l[7]||(l[7]=n=>t.showBulkItemModal=n),onItemsSelected:t.handleSelectedItems},null,8,["visible","onItemsSelected"])]),_:1})}const Gt=G(Xe,[["render",Ut],["__scopeId","data-v-3f088eda"]]);export{Gt as default};

import{_ as B}from"./BaseTab-D7yOCy_T.js";import{_ as Q}from"./BreadcrumbList.vue_vue_type_script_setup_true_lang-Brefl-cP.js";import{g as w,r as i,_ as k,b as n,d,e,t as o,F as $,x as C,A as R,M as V,u as N,ac as q,c as D,z as h,k as P,l as v,f as m,p as S}from"./index-DtKSGrAm.js";import{D as T}from"./DiscussionThread-DAl9e1dz.js";import"./index-DiGaO9lk.js";import"./index-DsNqXNZw.js";import"./index-CcNHh_jx.js";import"./index-Dv8gB4kq.js";const M=w({name:"ActivitiesLog",props:{roNumber:{type:String,required:!0}},setup(){return{activities:i([{user:"John Smith",role:"PM",date:"20 Sept 2024, 06:00 pm",action:"Budget Change Request created",icon:"pi pi-clock"},{user:"John Smith",role:"Purchasing",date:"28 Sept 2025, 11:09 am",action:"Added recommendation from Purchasing department",icon:"pi pi-comment"},{user:"Jane Doe",role:"QS",date:"29 Sept 2025, 09:30 am",action:"Reviewed variance calculation and confirmed figures",icon:"pi pi-comment"}])}}}),L={class:"card p-4 mb-6 shadow"},E={class:"text-lg font-semibold mb-4"},I={class:"space-y-4 text-sm"},J={class:"flex-shrink-0 w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center"},O={class:"flex-1"},U={class:"flex items-center gap-2"},F={class:"font-semibold"},j={class:"bg-primary/10 text-primary text-xs px-2 py-0.5 rounded"},z={class:"text-gray-400 text-xs"},H={class:"mt-1 text-gray-700 text-sm"};function K(s,t,u,p,b,y){return n(),d("div",L,[e("h3",E,"Activities Log (RO#: "+o(s.roNumber)+")",1),e("ul",I,[(n(!0),d($,null,C(s.activities,(a,l)=>(n(),d("li",{key:l,class:"flex gap-3"},[e("div",J,[e("i",{class:R([a.icon,"text-primary text-sm"])},null,2)]),e("div",O,[e("div",U,[e("span",F,o(a.user),1),e("span",j,o(a.role),1),e("span",z,o(a.date),1)]),e("div",H,o(a.action),1)])]))),128))])])}const G=k(M,[["render",K]]),W=w({name:"ViewBCR",components:{Motion:V,ActivitiesLog:G,DiscussionThread:T},setup(){const s=N(),t=q(),u=i(t.params.requestNo||""),p=i("Jakson"),b=i("29/9/2025"),y=i([{role:"Site",name:"John Smith",datetime:"08/09/2024, 23:30:00",message:"Current tiles are adequate for the purpose. Upgrade not essential from operational perspective.",documentUrl:"https://example.com/doc1.pdf",isEditing:!1},{role:"PM",name:"Jane Doe",datetime:"09/09/2024, 19:20:00",message:"Cost increase is too significant without clear functional benefit. Budget constraints do not allow this upgrade.",isEditing:!1}]),a=i([{itemCode:"TIL-03",description:"Ceramic floor tiles 600x600mm",uom:"mÂ²",unitPrice:165,budgetQty:250,orderedQty:0,newOrder:250,exceededQty:0,exceededPercent:0,estimatedExceed:41250,varianceQty:0,varianceAmount:34875,remark:"Upgrade to premium marble for enhanced aesthetic appeal",notes:"",showNotes:!1,showRemark:!1},{itemCode:"STL-01",description:"Steel reinforcement bar 60mm",uom:"Ton",unitPrice:500,budgetQty:10,orderedQty:10,newOrder:12,exceededQty:2,exceededPercent:20,estimatedExceed:1e3,varianceQty:2,varianceAmount:1e3,remark:"",notes:"Urgent requirement",showNotes:!1,showRemark:!1},{itemCode:"CEM-02",description:"Cement Portland Type I",uom:"Bag",unitPrice:12,budgetQty:200,orderedQty:200,newOrder:250,exceededQty:50,exceededPercent:25,estimatedExceed:600,varianceQty:50,varianceAmount:600,remark:"For foundation work",notes:"",showNotes:!1,showRemark:!1}]),l=D(()=>a.value.reduce((c,r)=>c+(r.varianceAmount||0),0)),f=i(!0),_=i("detail"),g=[{label:"Detail",value:"detail"},{label:"Activities Log",value:"activities"}];return{roNumber:u,requestBy:p,requestDate:b,items:a,totalVarianceAmount:l,isAttachmentValid:f,goBack:()=>s.push({name:"bcr"}),discussionData:y,active:i("0"),activeTab:_,tabItems:g}}}),X={class:"p-6 card"},Y={key:0},Z={class:"card p-4 mb-6 shadow"},ee={class:"grid grid-cols-2 gap-4 text-sm"},te={class:"w-full border rounded px-2 py-1 bg-gray-50"},se={class:"w-full border rounded px-2 py-1 bg-gray-50"},oe={class:"w-full border rounded px-2 py-1 bg-gray-50"},ae={class:"card p-4 mb-6 shadow"},re={class:"overflow-x-auto"},ie={class:"min-w-full border border-gray-200 text-sm"},ne={class:"border px-2 py-1"},de={class:"border px-2 py-1"},ce={class:"border px-2 py-1"},le={class:"border px-2 py-1"},me={class:"border px-2 py-1"},ue={class:"border px-2 py-1"},pe={class:"border px-2 py-1"},be={class:"text-right mt-4 font-semibold"},ye={key:1};function fe(s,t,u,p,b,y){const a=Q,l=h("DiscussionThread"),f=h("ActivitiesLog"),_=B,g=h("Motion");return n(),P(g,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.6}},{default:v(()=>[e("div",X,[m(a),m(_,{modelValue:s.activeTab,"onUpdate:modelValue":t[0]||(t[0]=c=>s.activeTab=c),tabs:s.tabItems},{default:v(({activeTab:c})=>[c==="detail"?(n(),d("div",Y,[t[8]||(t[8]=e("div",{class:"flex items-center justify-between mb-6"},[e("div",null,[e("h1",{class:"text-2xl font-bold"},"View Budget Change Request"),e("p",{class:"text-gray-500"},"Project: MKT")])],-1)),e("div",Z,[t[5]||(t[5]=e("h3",{class:"text-lg font-semibold mb-4"},"Header Information",-1)),e("div",ee,[e("div",null,[t[1]||(t[1]=e("label",{class:"block text-gray-600 mb-1"},"Request No",-1)),e("div",te,o(s.roNumber),1)]),e("div",null,[t[2]||(t[2]=e("label",{class:"block text-gray-600 mb-1"},"Requested By",-1)),e("div",se,o(s.requestBy),1)]),e("div",null,[t[3]||(t[3]=e("label",{class:"block text-gray-600 mb-1"},"Date Requested",-1)),e("div",oe,o(s.requestDate),1)]),t[4]||(t[4]=e("div",null,[e("label",{class:"block text-gray-600 mb-1"},"Reason of Request"),e("div",{class:"w-full border rounded px-2 py-1 bg-gray-50"},"VO")],-1))])]),e("div",ae,[t[7]||(t[7]=e("h3",{class:"text-lg font-semibold mb-4"},"Materials",-1)),e("div",re,[e("table",ie,[t[6]||(t[6]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-2 border"},"Item Code"),e("th",{class:"px-4 py-2 border"},"Description"),e("th",{class:"px-4 py-2 border"},"UOM"),e("th",{class:"px-4 py-2 border"},"Budgeted Qty"),e("th",{class:"px-4 py-2 border"},"Variance Qty"),e("th",{class:"px-4 py-2 border"},"Rate"),e("th",{class:"px-4 py-2 border"},"Variance Amount")])],-1)),e("tbody",null,[(n(!0),d($,null,C(s.items,(r,A)=>{var x;return n(),d("tr",{key:A},[e("td",ne,o(r.itemCode),1),e("td",de,o(r.description),1),e("td",ce,o(r.uom),1),e("td",le,o(r.budgetQty),1),e("td",me,o(r.varianceQty),1),e("td",ue,o(r.unitPrice),1),e("td",pe,o((x=r.varianceAmount)==null?void 0:x.toFixed(2)),1)])}),128))])])]),e("div",be,"Total Variance Amount: "+o(s.totalVarianceAmount.toFixed(2)),1)]),m(l,{discussions:s.discussionData,editMode:!1},null,8,["discussions"])])):c==="activities"?(n(),d("div",ye,[m(f,{roNumber:s.roNumber},null,8,["roNumber"])])):S("",!0)]),_:1},8,["modelValue","tabs"])])]),_:1})}const Ce=k(W,[["render",fe]]);export{Ce as default};
